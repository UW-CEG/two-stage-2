---
title: "Two-Stage Data Practice"
author: "Jackson Hughes"
date: "4/11/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(here)
library(tidyverse)
library(skimr)
library(moderndive)
```

### Set working directories

```{r}
proj_dir = here()
importable_data_dir = here("processing-and-analysis", "importable-data")
analysis_data_dir = here("processing-and-analysis", "analysis-data")
metadata_dir = here("original-data", "metadata")
```

### Import dataset

**Note:** There seems to be trouble with uploading the data through google file stream and the "here" package, so the data will be uploaded through my local device.

```{r}
master = read.csv("C:/Users/jacks/Downloads/master_2s_small_deidentified (DO NOT TOUCH).csv")
```

## Relationship 1: Scores for Exam 1, 2, and final by:
* `course_fullid`
* `course_fullid` and `ver`
* `course_fullid` and demographic `eop_id`, `sex_id`, `fgn_id`, `urm_id` (all separate)

### Faceted Histograms of Scores for Exam 1, 2, and final by `course_fullid`:

```{r}
ggplot(master, aes(x = exam1)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 1 Score", y = "Number of Students", title = "Exam 1 Score Distributions by Course ID") +
  facet_wrap(~ course_fullid, nrow = 2)

ggplot(master, aes(x = exam2)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 2 Score", y = "Number of Students", title = "Exam 2 Score Distributions by Course ID") +
  facet_wrap(~ course_fullid, nrow = 2)

ggplot(master, aes(x = finalexam)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Final Exam Score", y = "Number of Students", title = "Final Exam Score Distributions by Course ID") +
  facet_wrap(~ course_fullid, nrow = 2)
```

### Boxplots of Scores for Exam 1, 2, and final by `course_fullid`:

```{r}
ggplot(master, aes(x = course_fullid, y = exam1)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 1 Score", title = "Exam 1 Score Distributions by Course ID")

ggplot(master, aes(x = course_fullid, y = exam2)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 2 Score", title = "Exam 2 Score Distributions by Course ID")

ggplot(master, aes(x = course_fullid, y = finalexam)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Final Exam Score", title = "Final Exam Score Distributions by Course ID")
```


### Faceted Histograms of Scores for Exam 1, 2, and final by `course_fullid` and `ver`:

```{r}
ggplot(master, aes(x = exam1)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 1 Score", y = "Number of Students", title = "Exam 1 Score Distributions by Course ID and Test Version") +
  facet_wrap(~ course_fullid + ver, nrow = 3)

ggplot(master, aes(x = exam2)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 2 Score", y = "Number of Students", title = "Exam 2 Score Distributions by Course ID and Test Version") +
  facet_wrap(~ course_fullid + ver, nrow = 3)

ggplot(master, aes(x = finalexam)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Final Exam Score", y = "Number of Students", title = "Final Exam Score Distributions by Course ID and Test Version") +
  facet_wrap(~ course_fullid + ver, nrow = 3)
```

### Faceted Boxplots of Scores for Exam 1, 2, and final by `course_fullid` and `ver`:

```{r}
ggplot(master, aes(x = course_fullid, y = exam1)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 1 Score", title = "Exam 1 Score Distributions by Course ID") +
  facet_wrap(~ ver, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam2)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 2 Score", title = "Exam 2 Score Distributions by Course ID") +
  facet_wrap(~ ver, nrow = 3)

ggplot(master, aes(x = course_fullid, y = finalexam)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Final Exam Score", title = "Final Exam Score Distributions by Course ID") +
  facet_wrap(~ ver, nrow = 3)
```


### Faceted Histograms of Scores for Exam 1, 2, and Final by `course_fullid` and demographic `eop_id`, `sex_id`, `fgn_id`, `urm_id`:

```{r}
ggplot(master, aes(x = exam1)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 1 Score", y = "Number of Students", title = "Exam 1 Score Distributions by Course ID and EOP ID") +
  facet_wrap(~ course_fullid + eop_id, nrow = 3)

ggplot(master, aes(x = exam2)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 2 Score", y = "Number of Students", title = "Exam 2 Score Distributions by Course ID and EOP ID") +
  facet_wrap(~ course_fullid + eop_id, nrow = 3)

ggplot(master, aes(x = finalexam)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Final Exam Score", y = "Number of Students", title = "Final Exam Score Distributions by Course ID and EOP ID") +
  facet_wrap(~ course_fullid + eop_id, nrow = 3)

ggplot(master, aes(x = exam1)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 1 Score", y = "Number of Students", title = "Exam 1 Score Distributions by Course ID and Sex") +
  facet_wrap(~ course_fullid + sex_id, nrow = 3)

ggplot(master, aes(x = exam2)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 2 Score", y = "Number of Students", title = "Exam 2 Score Distributions by Course ID and Sex") +
  facet_wrap(~ course_fullid + sex_id, nrow = 3)

ggplot(master, aes(x = finalexam)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Final Exam Score", y = "Number of Students", title = "Final Exam Score Distributions by Course ID and Sex") +
  facet_wrap(~ course_fullid + sex_id, nrow = 3)

ggplot(master, aes(x = exam1)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 1 Score", y = "Number of Students", title = "Exam 1 Score Distributions by Course ID and FGN ID") +
  facet_wrap(~ course_fullid + fgn_id, nrow = 3)

ggplot(master, aes(x = exam2)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 2 Score", y = "Number of Students", title = "Exam 2 Score Distributions by Course ID and FGN ID") +
  facet_wrap(~ course_fullid + fgn_id, nrow = 3)

ggplot(master, aes(x = finalexam)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Final Exam Score", y = "Number of Students", title = "Final Exam Score Distributions by Course ID and FGN ID") +
  facet_wrap(~ course_fullid + fgn_id, nrow = 3)

ggplot(master, aes(x = exam1)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 1 Score", y = "Number of Students", title = "Exam 1 Score Distributions by Course ID and URM ID") +
  facet_wrap(~ course_fullid + urm_id, nrow = 3)

ggplot(master, aes(x = exam2)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Exam 2 Score", y = "Number of Students", title = "Exam 2 Score Distributions by Course ID and URM ID") +
  facet_wrap(~ course_fullid + urm_id, nrow = 3)

ggplot(master, aes(x = finalexam)) +
  geom_histogram(binwidth = 5, color = "white") +
  labs(x = "Final Exam Score", y = "Number of Students", title = "Final Exam Score Distributions by Course ID and URM ID") +
  facet_wrap(~ course_fullid + urm_id, nrow = 3)
```

### Faceted Histograms of Scores for Exam 1, 2, and Final by `course_fullid` and demographic `eop_id`, `sex_id`, `fgn_id`, `urm_id`:

```{r}
ggplot(master, aes(x = course_fullid, y = exam1)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 1 Score", title = "Exam 1 Score Distributions by Course ID and EOP ID") +
  facet_wrap(~ eop_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam2)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 2 Score", title = "Exam 2 Score Distributions by Course ID and EOP ID") +
  facet_wrap(~ eop_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = finalexam)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Final Exam Score", title = "Final Exam Score Distributions by Course ID and EOP ID") +
  facet_wrap(~ eop_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam1)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 1 Score", title = "Exam 1 Score Distributions by Course ID and Sex") +
  facet_wrap(~ sex_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam2)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 2 Score", title = "Exam 2 Score Distributions by Course ID and Sex") +
  facet_wrap(~ sex_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = finalexam)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Final Exam Score", title = "Final Exam Score Distributions by Course ID and Sex") +
  facet_wrap(~ sex_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam1)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 1 Score", title = "Exam 1 Score Distributions by Course ID and FGN ID") +
  facet_wrap(~ fgn_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam2)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 2 Score", title = "Exam 2 Score Distributions by Course ID and FGN ID") +
  facet_wrap(~ fgn_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = finalexam)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Final Exam Score", title = "Final Exam Score Distributions by Course ID and FGN ID") +
  facet_wrap(~ fgn_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam1)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 1 Score", title = "Exam 1 Score Distributions by Course ID and URM ID") +
  facet_wrap(~ urm_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = exam2)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Exam 2 Score", title = "Exam 2 Score Distributions by Course ID and URM ID") +
  facet_wrap(~ urm_id, nrow = 3)

ggplot(master, aes(x = course_fullid, y = finalexam)) +
  geom_boxplot() +
  labs(x = "Course ID", y = "Final Exam Score", title = "Final Exam Score Distributions by Course ID and URM ID") +
  facet_wrap(~ urm_id, nrow = 3)
```

### Notes:
* I still need to include summary statistics as well as all the data presentation for the A17 quiz scores.
* Need to learn how to improve the aesthetics of the plots
* Need to become more familiar with data wrangling so I can remove all of the "NA" inputs
* This is a very rough first attempt!